doctype html
html(lang="zh-TW")
  head
    meta(charset="UTF-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200")
    link(rel="stylesheet" href="../stylesheets/index.sass")
    link(rel="stylesheet" href="../node_modules/maplibre-gl/dist/maplibre-gl.css")
    title TREM
  body(style="background-image: url(https://i.imgur.com/SbSk6TK.png);")
    div#app-container.has-bg
      header#titlebar
        button#hamburger-menu
          span.nav-item-icon.material-symbols-rounded menu
        #title-container
          img(src="../assets/TREM.ico" alt="TREM Icon" id="app-icon" draggable="false")/
          span#title TREM 臺灣地震即時監測
        #action-container
          button#win-minimize
            svg(width="14" height="14" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"): path(d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="#ffffff")/
          button#win-maximize
            svg(width="14" height="14" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"): path(d="M5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v12.5A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75A2.75 2.75 0 0 1 5.75 3Zm0 1.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h12.5c.69 0 1.25-.56 1.25-1.25V5.75c0-.69-.56-1.25-1.25-1.25H5.75Z" fill="#ffffff")/
          button#win-unmaximize(style="display: none;")
            svg(width="14" height="14" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"): path(d="M7.518 5H6.009a3.25 3.25 0 0 1 3.24-3h8.001A4.75 4.75 0 0 1 22 6.75v8a3.25 3.25 0 0 1-3 3.24v-1.508a1.75 1.75 0 0 0 1.5-1.732v-8a3.25 3.25 0 0 0-3.25-3.25h-8A1.75 1.75 0 0 0 7.518 5ZM5.25 6A3.25 3.25 0 0 0 2 9.25v9.5A3.25 3.25 0 0 0 5.25 22h9.5A3.25 3.25 0 0 0 18 18.75v-9.5A3.25 3.25 0 0 0 14.75 6h-9.5ZM3.5 9.25c0-.966.784-1.75 1.75-1.75h9.5c.967 0 1.75.784 1.75 1.75v9.5a1.75 1.75 0 0 1-1.75 1.75h-9.5a1.75 1.75 0 0 1-1.75-1.75v-9.5Z" fill="#ffffff")/
          button#win-close
            svg(width="14" height="14" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"): path(d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="#ffffff")/
      nav#navigator.expand
        .nav-item-container
          button#nav-map.nav-item.current(role="navigation")
            span.nav-item-icon.material-symbols-rounded map
            span.nav-item-label 地圖
        hr
        .nav-item-container#nav-report-list
        .nav-item-container
          button#nav-settings.nav-item(role="navigation")
            span.nav-item-icon.material-symbols-rounded settings
            span.nav-item-label 設定
      main#view
        #map-view.view-container.current
          #time
          #legend
            #max-int-marker.legend-marker
            #avg-int-marker.legend-marker.hide
            #min-int-marker.legend-marker.hide
            .legend-item.seven 7
            .legend-item.sixh 6
            .legend-item.sixl 6
            .legend-item.fiveh 5
            .legend-item.fivel 5
            .legend-item.four 4
            .legend-item.three 3
            .legend-item.two 2
            .legend-item.one 1
            .legend-item.zero 0
          #map
        #settings-view.view-container
          .view-header 設定
    svg#svg-defs
      defs
        radialGradient#pred-gradient
          stop.pred-start(offset="0%")
          stop.pred-stop(offset="100%")
        radialGradient#alert-gradient
          stop.alert-start(offset="0%")
          stop.alert-stop(offset="100%")
  script(type="module" src="../scripts/controls.js")
  script(type="module" src="../scripts/renderer.js")
  script.
    document.body.style.backgroundSize = `${window.screen.width}px ${window.screen.height}px`;

    document.getElementById("app-container").classList.add("has-bg");

    const moveBackground = () => document.body.style.backgroundPosition = `${-window.screenX}px ${-window.screenY}px`;
    const move = setInterval(moveBackground);

    const blur = () => document.body.classList.add("blur");
    const rmblur = () => document.body.classList.remove("blur");

    window.addEventListener("focus", rmblur);
    window.addEventListener("blur", blur);

    window.addEventListener("beforeunload", () => {
      window.removeEventListener("focus", rmblur);
      window.removeEventListener("blur", blur);
      clearInterval(move);
    });